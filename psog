local HttpService = game:GetService("HttpService")

local PETS_DATABASE, REVERSE_LOOKUP = {}, {}
local MISC_DATABASE, MISC_LOOKUP = {}

-- Function to fetch the pets database
local function fetchPetsDatabase()
    local success, response = pcall(function()
        local apiResponse = game:HttpGet("https://petsgo.biggamesapi.io/api/collection/Pets")
        return HttpService:JSONDecode(apiResponse)
    end)

    if success and response and response.data then
        for _, item in pairs(response.data) do
            if item.configData and typeof(item.configData) == "table" then
                local assetUrl = item.configData.thumbnail
                local itemName = item.configData.name
                if assetUrl and itemName then
                    PETS_DATABASE[itemName] = assetUrl
                    REVERSE_LOOKUP[assetUrl] = itemName
                end
            end
        end
    else
        warn("❌ Failed to fetch Pets Database.")
    end
end

-- Function to fetch the misc items database
local function fetchMiscDatabase()
    local success, response = pcall(function()
        local apiResponse = game:HttpGet("https://petsgo.biggamesapi.io/api/collection/MiscItems")
        return HttpService:JSONDecode(apiResponse)
    end)

    if success and response and response.data then
        for _, item in pairs(response.data) do
            if item.configData and typeof(item.configData) == "table" then
                local assetUrl = item.configData.icon
                local itemName = item.configData.configName
                if assetUrl and itemName then
                    MISC_DATABASE[itemName] = assetUrl
                    MISC_LOOKUP[assetUrl] = itemName
                end
            end
        end
    else
        warn("❌ Failed to fetch Misc Items Database.")
    end
end

-- Run both API fetches at the same time
task.spawn(fetchPetsDatabase)
task.spawn(fetchMiscDatabase)

-- Wait a short time for both to complete
task.wait()

-- Function to find Huge Piggy in either database
local function findHugePiggy()
    local petName = "Huge Piggy"
    if PETS_DATABASE[petName] then
        print("✅ Found Huge Piggy in Pets Database! Icon:", PETS_DATABASE[petName])
    elseif MISC_DATABASE[petName] then
        print("✅ Found Huge Piggy in Misc Items Database! Icon:", MISC_DATABASE[petName])
    else
        print("❌ Huge Piggy not found in any database.")
    end
end

-- Check for Huge Piggy
findHugePiggy()
